<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PHPSDK: Easemob\Attachment Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PHPSDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_easemob.html">Easemob</a></li><li class="navelem"><a class="el" href="class_easemob_1_1_attachment.html">Attachment</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_easemob_1_1_attachment-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Easemob\Attachment Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1968a6dcf8651e5497e37fdbddcf1230"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_easemob_1_1_attachment.html#a1968a6dcf8651e5497e37fdbddcf1230">uploadFile</a> ($fileName, $restrictAccess=false)</td></tr>
<tr class="memdesc:a1968a6dcf8651e5497e37fdbddcf1230"><td class="mdescLeft">&#160;</td><td class="mdescRight">File upload.  <a href="class_easemob_1_1_attachment.html#a1968a6dcf8651e5497e37fdbddcf1230">More...</a><br /></td></tr>
<tr class="separator:a1968a6dcf8651e5497e37fdbddcf1230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73235abd16dd37c9a45db406925d2731"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_easemob_1_1_attachment.html#a73235abd16dd37c9a45db406925d2731">downloadFile</a> ($fileName, $uuid, $shareSecret='')</td></tr>
<tr class="memdesc:a73235abd16dd37c9a45db406925d2731"><td class="mdescLeft">&#160;</td><td class="mdescRight">Download attachments.  <a href="class_easemob_1_1_attachment.html#a73235abd16dd37c9a45db406925d2731">More...</a><br /></td></tr>
<tr class="separator:a73235abd16dd37c9a45db406925d2731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f16ec2a4a7abf29139684ad3bb92e9e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_easemob_1_1_attachment.html#a4f16ec2a4a7abf29139684ad3bb92e9e">downloadThumb</a> ($fileName, $uuid, $shareSecret='')</td></tr>
<tr class="memdesc:a4f16ec2a4a7abf29139684ad3bb92e9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Download thumbnails.  <a href="class_easemob_1_1_attachment.html#a4f16ec2a4a7abf29139684ad3bb92e9e">More...</a><br /></td></tr>
<tr class="separator:a4f16ec2a4a7abf29139684ad3bb92e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <code><a class="el" href="class_easemob_1_1_attachment.html">Attachment</a></code> is used to upload and download attachments </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a73235abd16dd37c9a45db406925d2731"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73235abd16dd37c9a45db406925d2731">&#9670;&nbsp;</a></span>downloadFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Easemob\Attachment::downloadFile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$shareSecret</em> = <code>''</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Download attachments. </p>
<p>It should be noted here that if you choose not to share the file when uploading the file, you need to bring the share secret returned above and the token of the currently logged in user in the request header to download it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$fileName</td><td>Downloaded file name </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$uuid</td><td>Unique ID of the file, which will be returned after the file is uploaded successfully </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$shareSecret</td><td>share-secret，it will return after the file is uploaded successfully </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int|array Download file size or error </dd></dl>

</div>
</div>
<a id="a4f16ec2a4a7abf29139684ad3bb92e9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f16ec2a4a7abf29139684ad3bb92e9e">&#9670;&nbsp;</a></span>downloadThumb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Easemob\Attachment::downloadThumb </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$shareSecret</em> = <code>''</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Download thumbnails. </p>
<p>The server side supports the automatic creation of thumbnails of pictures. You can download thumbnails first, and then download large images when users need them. The only difference between this and downloading the big picture is that there is an "thumbnail: true" in the header. When the server sees that this is included in the header of the request, it will return the thumbnail, otherwise it will return the original big picture.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$fileName</td><td>Download thumbnail file name </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$uuid</td><td>Unique ID of the file, which will be returned after the file is uploaded successfully </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$shareSecret</td><td>share-secret，it will return after the file is uploaded successfully </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int|array Download file size or error </dd></dl>

</div>
</div>
<a id="a1968a6dcf8651e5497e37fdbddcf1230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1968a6dcf8651e5497e37fdbddcf1230">&#9670;&nbsp;</a></span>uploadFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Easemob\Attachment::uploadFile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$restrictAccess</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>File upload. </p>
<ul>
<li>The size of the uploaded file cannot exceed 10m. If it exceeds 10m, the upload will fail.</li>
<li>When uploading files, you can choose whether to restrict access rights. If you choose to restrict, a secret will be returned after the upload request is completed. Only those who know the secret and are registered users of the app can download files. If you choose not to limit, you can download as long as you are a registered user of the app.</li>
<li>If you choose to add the secret limit, the message callback (including the callback before sending and the callback after sending) and the historical message, which involve downloading files, need to splice the secret in the download URL to download files normally;</li>
<li>The splicing rules are as follows: url?share-secret=secret</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$fileName</td><td>Uploaded attachments </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$restrictAccess</td><td>Controls whether the file can be obtained by anyone. This value is true. A share secret value will be added to the returned result. This value is required to access the file again. Default: false </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array Upload file information or error </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
