\hypertarget{class_easemob_1_1_message}{}\doxysection{Easemob\textbackslash{}Message类 参考}
\label{class_easemob_1_1_message}\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_easemob_1_1_message_a977a164aafd5f0702825c032f749e126}{text}} (\$target\+\_\+type, \$target, \$message, \$from=\textquotesingle{}admin\textquotesingle{}, \$sync\+\_\+device=false, \$is\+Online=false)
\begin{DoxyCompactList}\small\item\em 发送文本消息 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a4b6f402d9f9303e61de187a9f7fdc2dc}{image}} (\$target\+\_\+type, \$target, \$message, \$from=\textquotesingle{}admin\textquotesingle{}, \$sync\+\_\+device=false, \$is\+Online=false)
\begin{DoxyCompactList}\small\item\em 发送图片消息 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a7bfa86af9c8f4ad8fa2c0073680306ed}{audio}} (\$target\+\_\+type, \$target, \$message, \$from=\textquotesingle{}admin\textquotesingle{}, \$sync\+\_\+device=false, \$is\+Online=false)
\begin{DoxyCompactList}\small\item\em 发送语音消息 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a4f98f2385555326c6b2043477ca9cfd5}{video}} (\$target\+\_\+type, \$target, \$message, \$from=\textquotesingle{}admin\textquotesingle{}, \$sync\+\_\+device=false, \$is\+Online=false)
\begin{DoxyCompactList}\small\item\em 发送视频消息 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a6107b952bce223b8638b5454c6010ed1}{file}} (\$target\+\_\+type, \$target, \$message, \$from=\textquotesingle{}admin\textquotesingle{}, \$sync\+\_\+device=false, \$is\+Online=false)
\begin{DoxyCompactList}\small\item\em 发送文件消息 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_afbf53a1a85ecdd92b407338470b3bf41}{location}} (\$target\+\_\+type, \$target, \$message, \$from=\textquotesingle{}admin\textquotesingle{}, \$sync\+\_\+device=false, \$is\+Online=false)
\begin{DoxyCompactList}\small\item\em 发送位置消息 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a3e2ecf4983a71b61f5f92249d34d5d76}{cmd}} (\$target\+\_\+type, \$target, \$message, \$from=\textquotesingle{}admin\textquotesingle{}, \$sync\+\_\+device=false, \$is\+Online=false)
\begin{DoxyCompactList}\small\item\em 发送透传消息 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a9f40ca25edae812df13be0c546dab005}{custom}} (\$target\+\_\+type, \$target, \$message, \$from=\textquotesingle{}admin\textquotesingle{}, \$sync\+\_\+device=false, \$is\+Online=false)
\begin{DoxyCompactList}\small\item\em 发送自定义消息 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a333fc0fb19e16e61dd083b7fcdb4c2ad}{count\+Missed\+Messages}} (\$username)
\begin{DoxyCompactList}\small\item\em 获取用户离线消息数 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a98a2a3439e7ad7c40e4488c87e4557c0}{is\+Message\+Delivered\+To\+User}} (\$username, \$msg\+Id)
\begin{DoxyCompactList}\small\item\em 获取某条离线消息状态 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a39c471ba3cf56b3b390a77197ba64ef5}{get\+History\+As\+Uri}} (\$date\+Time)
\begin{DoxyCompactList}\small\item\em 获取历史消息文件下载地址 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a0f0d26c06de9a8ea37f0bd883e616431}{get\+History\+As\+Local\+File}} (\$date\+Time, \$filename)
\begin{DoxyCompactList}\small\item\em 下载消息历史文件到本地 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_ad3e02f39fd2315a494d37dc671624fa6}{withdraw}} (\$msgs)
\begin{DoxyCompactList}\small\item\em 服务端消息撤回 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_easemob_1_1_message_a3a95f8186f9af093c86c95b80af2948e}{delete\+Session}} (\$username, \$channel, \$type, \$delete\+\_\+roam=true)
\begin{DoxyCompactList}\small\item\em 服务端单向删除会话 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\mbox{\hyperlink{class_easemob_1_1_message}{Message}} 用来发送消息 

\doxysubsection{成员函数说明}
\mbox{\Hypertarget{class_easemob_1_1_message_a7bfa86af9c8f4ad8fa2c0073680306ed}\label{class_easemob_1_1_message_a7bfa86af9c8f4ad8fa2c0073680306ed}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!audio@{audio}}
\index{audio@{audio}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{audio()}{audio()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::audio (\begin{DoxyParamCaption}\item[{}]{\$target\+\_\+type,  }\item[{}]{\$target,  }\item[{}]{\$message,  }\item[{}]{\$from = {\ttfamily \textquotesingle{}admin\textquotesingle{}},  }\item[{}]{\$sync\+\_\+device = {\ttfamily false},  }\item[{}]{\$is\+Online = {\ttfamily false} }\end{DoxyParamCaption})}



发送语音消息 


\begin{DoxyParams}[1]{参数}
string & {\em \$target\+\_\+type} & 发送的目标类型；users：给用户发消息，chatgroups：给群发消息，chatrooms：给聊天室发消息 \\
\hline
array & {\em \$target} & 发送的目标；注意这里需要用数组，数组内添加的最大用户数默认 600 个，即使只有一个用户，也要用数组 \mbox{[}‘u1’\mbox{]}；给用户发送时数组元素是用户名，给群组发送时，数组元素是 groupid。 \\
\hline
array & {\em \$message} & 消息内容 \\
\hline
string & {\em \$from} & 表示消息发送者；无此字段 Server 会默认设置为 \char`\"{}from\char`\"{}\+: \char`\"{}admin\char`\"{}，有 from 字段但值为空串 (\char`\"{}\char`\"{}) 时请求失败 \\
\hline
string & {\em \$sync\+\_\+device} & 消息发送成功后，是否将消息同步给发送方。true：是；false（默认）：否。 \\
\hline
boolean & {\em \$is\+Online} & 该参数值为 true 时，代表 routetype 的值为 “\+ROUTE\+\_\+\+ONLINE”，表示发送消息时只有接收方在线时，才进行消息投递。若接收方离线，将不会收到此条消息。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
array 发送给的目标和对应消息 id 的数组或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a3e2ecf4983a71b61f5f92249d34d5d76}\label{class_easemob_1_1_message_a3e2ecf4983a71b61f5f92249d34d5d76}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!cmd@{cmd}}
\index{cmd@{cmd}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{cmd()}{cmd()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::cmd (\begin{DoxyParamCaption}\item[{}]{\$target\+\_\+type,  }\item[{}]{\$target,  }\item[{}]{\$message,  }\item[{}]{\$from = {\ttfamily \textquotesingle{}admin\textquotesingle{}},  }\item[{}]{\$sync\+\_\+device = {\ttfamily false},  }\item[{}]{\$is\+Online = {\ttfamily false} }\end{DoxyParamCaption})}



发送透传消息 


\begin{DoxyParams}[1]{参数}
string & {\em \$target\+\_\+type} & 发送的目标类型；users：给用户发消息，chatgroups：给群发消息，chatrooms：给聊天室发消息 \\
\hline
array & {\em \$target} & 发送的目标；注意这里需要用数组，数组内添加的最大用户数默认 600 个，即使只有一个用户，也要用数组 \mbox{[}‘u1’\mbox{]}；给用户发送时数组元素是用户名，给群组发送时，数组元素是 groupid。 \\
\hline
array & {\em \$message} & 消息内容 \\
\hline
string & {\em \$from} & 表示消息发送者；无此字段 Server 会默认设置为 \char`\"{}from\char`\"{}\+: \char`\"{}admin\char`\"{}，有 from 字段但值为空串 (\char`\"{}\char`\"{}) 时请求失败 \\
\hline
string & {\em \$sync\+\_\+device} & 消息发送成功后，是否将消息同步给发送方。true：是；false（默认）：否。 \\
\hline
boolean & {\em \$is\+Online} & 该参数值为 true 时，代表 routetype 的值为 “\+ROUTE\+\_\+\+ONLINE”，表示发送消息时只有接收方在线时，才进行消息投递。若接收方离线，将不会收到此条消息。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
array 发送给的目标和对应消息 id 的数组或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a333fc0fb19e16e61dd083b7fcdb4c2ad}\label{class_easemob_1_1_message_a333fc0fb19e16e61dd083b7fcdb4c2ad}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!countMissedMessages@{countMissedMessages}}
\index{countMissedMessages@{countMissedMessages}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{countMissedMessages()}{countMissedMessages()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::count\+Missed\+Messages (\begin{DoxyParamCaption}\item[{}]{\$username }\end{DoxyParamCaption})}



获取用户离线消息数 


\begin{DoxyParams}[1]{参数}
string & {\em \$username} & 用户名 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
int$\vert$array 用户离线消息数量或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a9f40ca25edae812df13be0c546dab005}\label{class_easemob_1_1_message_a9f40ca25edae812df13be0c546dab005}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!custom@{custom}}
\index{custom@{custom}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{custom()}{custom()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::custom (\begin{DoxyParamCaption}\item[{}]{\$target\+\_\+type,  }\item[{}]{\$target,  }\item[{}]{\$message,  }\item[{}]{\$from = {\ttfamily \textquotesingle{}admin\textquotesingle{}},  }\item[{}]{\$sync\+\_\+device = {\ttfamily false},  }\item[{}]{\$is\+Online = {\ttfamily false} }\end{DoxyParamCaption})}



发送自定义消息 


\begin{DoxyParams}[1]{参数}
string & {\em \$target\+\_\+type} & 发送的目标类型；users：给用户发消息，chatgroups：给群发消息，chatrooms：给聊天室发消息 \\
\hline
array & {\em \$target} & 发送的目标；注意这里需要用数组，数组内添加的最大用户数默认 600 个，即使只有一个用户，也要用数组 \mbox{[}‘u1’\mbox{]}；给用户发送时数组元素是用户名，给群组发送时，数组元素是 groupid。 \\
\hline
array & {\em \$message} & 消息内容 \\
\hline
string & {\em \$from} & 表示消息发送者；无此字段 Server 会默认设置为 \char`\"{}from\char`\"{}\+: \char`\"{}admin\char`\"{}，有 from 字段但值为空串 (\char`\"{}\char`\"{}) 时请求失败 \\
\hline
string & {\em \$sync\+\_\+device} & 消息发送成功后，是否将消息同步给发送方。true：是；false（默认）：否。 \\
\hline
boolean & {\em \$is\+Online} & 该参数值为 true 时，代表 routetype 的值为 “\+ROUTE\+\_\+\+ONLINE”，表示发送消息时只有接收方在线时，才进行消息投递。若接收方离线，将不会收到此条消息。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
array 发送给的目标和对应消息 id 的数组或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a3a95f8186f9af093c86c95b80af2948e}\label{class_easemob_1_1_message_a3a95f8186f9af093c86c95b80af2948e}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!deleteSession@{deleteSession}}
\index{deleteSession@{deleteSession}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{deleteSession()}{deleteSession()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::delete\+Session (\begin{DoxyParamCaption}\item[{}]{\$username,  }\item[{}]{\$channel,  }\item[{}]{\$type,  }\item[{}]{\$delete\+\_\+roam = {\ttfamily true} }\end{DoxyParamCaption})}



服务端单向删除会话 


\begin{DoxyParams}[1]{参数}
string & {\em \$username} & 用户名 \\
\hline
string & {\em \$channel} & 要删除的会话 ID。 \\
\hline
string & {\em \$type} & 会话类型。chat：单聊会话；groupchat：群聊会话。 \\
\hline
string & {\em \$delete\+\_\+roam} & 是否删除服务端消息，不允许为空。true：是；false：否。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
boolean 成功或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a6107b952bce223b8638b5454c6010ed1}\label{class_easemob_1_1_message_a6107b952bce223b8638b5454c6010ed1}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!file@{file}}
\index{file@{file}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{file()}{file()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::file (\begin{DoxyParamCaption}\item[{}]{\$target\+\_\+type,  }\item[{}]{\$target,  }\item[{}]{\$message,  }\item[{}]{\$from = {\ttfamily \textquotesingle{}admin\textquotesingle{}},  }\item[{}]{\$sync\+\_\+device = {\ttfamily false},  }\item[{}]{\$is\+Online = {\ttfamily false} }\end{DoxyParamCaption})}



发送文件消息 


\begin{DoxyParams}[1]{参数}
string & {\em \$target\+\_\+type} & 发送的目标类型；users：给用户发消息，chatgroups：给群发消息，chatrooms：给聊天室发消息 \\
\hline
array & {\em \$target} & 发送的目标；注意这里需要用数组，数组内添加的最大用户数默认 600 个，即使只有一个用户，也要用数组 \mbox{[}‘u1’\mbox{]}；给用户发送时数组元素是用户名，给群组发送时，数组元素是 groupid。 \\
\hline
array & {\em \$message} & 消息内容 \\
\hline
string & {\em \$from} & 表示消息发送者；无此字段 Server 会默认设置为 \char`\"{}from\char`\"{}\+: \char`\"{}admin\char`\"{}，有 from 字段但值为空串 (\char`\"{}\char`\"{}) 时请求失败 \\
\hline
string & {\em \$sync\+\_\+device} & 消息发送成功后，是否将消息同步给发送方。true：是；false（默认）：否。 \\
\hline
boolean & {\em \$is\+Online} & 该参数值为 true 时，代表 routetype 的值为 “\+ROUTE\+\_\+\+ONLINE”，表示发送消息时只有接收方在线时，才进行消息投递。若接收方离线，将不会收到此条消息。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
array 发送给的目标和对应消息 id 的数组或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a0f0d26c06de9a8ea37f0bd883e616431}\label{class_easemob_1_1_message_a0f0d26c06de9a8ea37f0bd883e616431}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!getHistoryAsLocalFile@{getHistoryAsLocalFile}}
\index{getHistoryAsLocalFile@{getHistoryAsLocalFile}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{getHistoryAsLocalFile()}{getHistoryAsLocalFile()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::get\+History\+As\+Local\+File (\begin{DoxyParamCaption}\item[{}]{\$date\+Time,  }\item[{}]{\$filename }\end{DoxyParamCaption})}



下载消息历史文件到本地 


\begin{DoxyParams}[1]{参数}
int & {\em \$datetime} & 时间，每次只能获取一小时的消息，格式为 yyyy\+MMdd\+HH 如 2018112717。 \\
\hline
string & {\em \$filename} & 下载后的文件名，消息历史文件是 gz 压缩的。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
boolean$\vert$array 下载成功或错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a39c471ba3cf56b3b390a77197ba64ef5}\label{class_easemob_1_1_message_a39c471ba3cf56b3b390a77197ba64ef5}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!getHistoryAsUri@{getHistoryAsUri}}
\index{getHistoryAsUri@{getHistoryAsUri}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{getHistoryAsUri()}{getHistoryAsUri()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::get\+History\+As\+Uri (\begin{DoxyParamCaption}\item[{}]{\$date\+Time }\end{DoxyParamCaption})}



获取历史消息文件下载地址 

导出聊天记录接口不是实时接口，获取成功存在一定的延时，不能够作为实时拉取消息的接口使用。以下 API 均需要企业管理员权限才能访问。此接口一次只能获取一个小时的历史消息。


\begin{DoxyParams}[1]{参数}
int & {\em \$datetime} & 时间，每次只能获取一小时的消息，格式为 yyyy\+MMdd\+HH 如 2018112717。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
string$\vert$array 聊天记录文件下载地址或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a4b6f402d9f9303e61de187a9f7fdc2dc}\label{class_easemob_1_1_message_a4b6f402d9f9303e61de187a9f7fdc2dc}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!image@{image}}
\index{image@{image}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{image()}{image()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::image (\begin{DoxyParamCaption}\item[{}]{\$target\+\_\+type,  }\item[{}]{\$target,  }\item[{}]{\$message,  }\item[{}]{\$from = {\ttfamily \textquotesingle{}admin\textquotesingle{}},  }\item[{}]{\$sync\+\_\+device = {\ttfamily false},  }\item[{}]{\$is\+Online = {\ttfamily false} }\end{DoxyParamCaption})}



发送图片消息 


\begin{DoxyParams}[1]{参数}
string & {\em \$target\+\_\+type} & 发送的目标类型；users：给用户发消息，chatgroups：给群发消息，chatrooms：给聊天室发消息 \\
\hline
array & {\em \$target} & 发送的目标；注意这里需要用数组，数组内添加的最大用户数默认 600 个，即使只有一个用户，也要用数组 \mbox{[}‘u1’\mbox{]}；给用户发送时数组元素是用户名，给群组发送时，数组元素是 groupid。 \\
\hline
array & {\em \$message} & 消息内容 \\
\hline
string & {\em \$from} & 表示消息发送者；无此字段 Server 会默认设置为 \char`\"{}from\char`\"{}\+: \char`\"{}admin\char`\"{}，有 from 字段但值为空串 (\char`\"{}\char`\"{}) 时请求失败 \\
\hline
string & {\em \$sync\+\_\+device} & 消息发送成功后，是否将消息同步给发送方。true：是；false（默认）：否。 \\
\hline
boolean & {\em \$is\+Online} & 该参数值为 true 时，代表 routetype 的值为 “\+ROUTE\+\_\+\+ONLINE”，表示发送消息时只有接收方在线时，才进行消息投递。若接收方离线，将不会收到此条消息。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
array 发送给的目标和对应消息 id 的数组或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a98a2a3439e7ad7c40e4488c87e4557c0}\label{class_easemob_1_1_message_a98a2a3439e7ad7c40e4488c87e4557c0}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!isMessageDeliveredToUser@{isMessageDeliveredToUser}}
\index{isMessageDeliveredToUser@{isMessageDeliveredToUser}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{isMessageDeliveredToUser()}{isMessageDeliveredToUser()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::is\+Message\+Delivered\+To\+User (\begin{DoxyParamCaption}\item[{}]{\$username,  }\item[{}]{\$msg\+Id }\end{DoxyParamCaption})}



获取某条离线消息状态 


\begin{DoxyParams}[1]{参数}
string & {\em \$username} & 用户名 \\
\hline
string & {\em \$msg\+Id} & 消息 ID 编号 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
string$\vert$array 离线消息状态（delivered：表示状态为消息已投递；undelivered：表示消息未投递；msg\+\_\+not\+\_\+found：消息不存在）或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_afbf53a1a85ecdd92b407338470b3bf41}\label{class_easemob_1_1_message_afbf53a1a85ecdd92b407338470b3bf41}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!location@{location}}
\index{location@{location}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{location()}{location()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::location (\begin{DoxyParamCaption}\item[{}]{\$target\+\_\+type,  }\item[{}]{\$target,  }\item[{}]{\$message,  }\item[{}]{\$from = {\ttfamily \textquotesingle{}admin\textquotesingle{}},  }\item[{}]{\$sync\+\_\+device = {\ttfamily false},  }\item[{}]{\$is\+Online = {\ttfamily false} }\end{DoxyParamCaption})}



发送位置消息 


\begin{DoxyParams}[1]{参数}
string & {\em \$target\+\_\+type} & 发送的目标类型；users：给用户发消息，chatgroups：给群发消息，chatrooms：给聊天室发消息 \\
\hline
array & {\em \$target} & 发送的目标；注意这里需要用数组，数组内添加的最大用户数默认 600 个，即使只有一个用户，也要用数组 \mbox{[}‘u1’\mbox{]}；给用户发送时数组元素是用户名，给群组发送时，数组元素是 groupid。 \\
\hline
array & {\em \$message} & 消息内容 \\
\hline
string & {\em \$from} & 表示消息发送者；无此字段 Server 会默认设置为 \char`\"{}from\char`\"{}\+: \char`\"{}admin\char`\"{}，有 from 字段但值为空串 (\char`\"{}\char`\"{}) 时请求失败 \\
\hline
string & {\em \$sync\+\_\+device} & 消息发送成功后，是否将消息同步给发送方。true：是；false（默认）：否。 \\
\hline
boolean & {\em \$is\+Online} & 该参数值为 true 时，代表 routetype 的值为 “\+ROUTE\+\_\+\+ONLINE”，表示发送消息时只有接收方在线时，才进行消息投递。若接收方离线，将不会收到此条消息。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
array 发送给的目标和对应消息 id 的数组或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a977a164aafd5f0702825c032f749e126}\label{class_easemob_1_1_message_a977a164aafd5f0702825c032f749e126}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!text@{text}}
\index{text@{text}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{text()}{text()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::text (\begin{DoxyParamCaption}\item[{}]{\$target\+\_\+type,  }\item[{}]{\$target,  }\item[{}]{\$message,  }\item[{}]{\$from = {\ttfamily \textquotesingle{}admin\textquotesingle{}},  }\item[{}]{\$sync\+\_\+device = {\ttfamily false},  }\item[{}]{\$is\+Online = {\ttfamily false} }\end{DoxyParamCaption})}



发送文本消息 


\begin{DoxyParams}[1]{参数}
string & {\em \$target\+\_\+type} & 发送的目标类型；users：给用户发消息，chatgroups：给群发消息，chatrooms：给聊天室发消息 \\
\hline
array & {\em \$target} & 发送的目标；注意这里需要用数组，数组内添加的最大用户数默认 600 个，即使只有一个用户，也要用数组 \mbox{[}‘u1’\mbox{]}；给用户发送时数组元素是用户名，给群组发送时，数组元素是 groupid。 \\
\hline
array & {\em \$message} & 消息内容 \\
\hline
string & {\em \$from} & 表示消息发送者；无此字段 Server 会默认设置为 \char`\"{}from\char`\"{}\+: \char`\"{}admin\char`\"{}，有 from 字段但值为空串 (\char`\"{}\char`\"{}) 时请求失败 \\
\hline
string & {\em \$sync\+\_\+device} & 消息发送成功后，是否将消息同步给发送方。true：是；false（默认）：否。 \\
\hline
boolean & {\em \$is\+Online} & 该参数值为 true 时，代表 routetype 的值为 “\+ROUTE\+\_\+\+ONLINE”，表示发送消息时只有接收方在线时，才进行消息投递。若接收方离线，将不会收到此条消息。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
array 发送给的目标和对应消息 id 的数组或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_a4f98f2385555326c6b2043477ca9cfd5}\label{class_easemob_1_1_message_a4f98f2385555326c6b2043477ca9cfd5}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!video@{video}}
\index{video@{video}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{video()}{video()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::video (\begin{DoxyParamCaption}\item[{}]{\$target\+\_\+type,  }\item[{}]{\$target,  }\item[{}]{\$message,  }\item[{}]{\$from = {\ttfamily \textquotesingle{}admin\textquotesingle{}},  }\item[{}]{\$sync\+\_\+device = {\ttfamily false},  }\item[{}]{\$is\+Online = {\ttfamily false} }\end{DoxyParamCaption})}



发送视频消息 


\begin{DoxyParams}[1]{参数}
string & {\em \$target\+\_\+type} & 发送的目标类型；users：给用户发消息，chatgroups：给群发消息，chatrooms：给聊天室发消息 \\
\hline
array & {\em \$target} & 发送的目标；注意这里需要用数组，数组内添加的最大用户数默认 600 个，即使只有一个用户，也要用数组 \mbox{[}‘u1’\mbox{]}；给用户发送时数组元素是用户名，给群组发送时，数组元素是 groupid。 \\
\hline
array & {\em \$message} & 消息内容 \\
\hline
string & {\em \$from} & 表示消息发送者；无此字段 Server 会默认设置为 \char`\"{}from\char`\"{}\+: \char`\"{}admin\char`\"{}，有 from 字段但值为空串 (\char`\"{}\char`\"{}) 时请求失败 \\
\hline
string & {\em \$sync\+\_\+device} & 消息发送成功后，是否将消息同步给发送方。true：是；false（默认）：否。 \\
\hline
boolean & {\em \$is\+Online} & 该参数值为 true 时，代表 routetype 的值为 “\+ROUTE\+\_\+\+ONLINE”，表示发送消息时只有接收方在线时，才进行消息投递。若接收方离线，将不会收到此条消息。 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
array 发送给的目标和对应消息 id 的数组或者错误 
\end{DoxyReturn}
\mbox{\Hypertarget{class_easemob_1_1_message_ad3e02f39fd2315a494d37dc671624fa6}\label{class_easemob_1_1_message_ad3e02f39fd2315a494d37dc671624fa6}} 
\index{Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}!withdraw@{withdraw}}
\index{withdraw@{withdraw}!Easemob\textbackslash{}Message@{Easemob\textbackslash{}Message}}
\doxysubsubsection{\texorpdfstring{withdraw()}{withdraw()}}
{\footnotesize\ttfamily Easemob\textbackslash{}\+Message\+::withdraw (\begin{DoxyParamCaption}\item[{}]{\$msgs }\end{DoxyParamCaption})}



服务端消息撤回 

应用管理员可调用接口撤回发送的消息，默认时限为 2 分钟，如需调整请联系环信商务经理。


\begin{DoxyParams}[1]{参数}
array & {\em \$msg} & 要撤回的消息，一维数组代表撤回一条消息，二维数组代表撤回多条消息
\begin{DoxyItemize}
\item {\ttfamily msg\+\_\+id} String 类型，撤回消息的消息 ID。
\item {\ttfamily to} 可选，\+String 类型，撤回消息的接收方。如果不提供则消息体找不到就撤回不了。单聊为接收方用户名称，群组为群 ID，聊天室为聊天室 ID。
\item {\ttfamily chat\+\_\+type} String 类型，撤回消息的三种消息类型：单聊：chat；群聊：group\+\_\+chat；聊天室：chatroom。
\item {\ttfamily from} 可选，\+String 类型，消息撤回方，不传默认使用的是 admin，默认消息撤回方为原消息发送者。你可以通过用户 ID 指定消息撤回方。
\item {\ttfamily force} boolean 类型，是否为强制撤回：
\begin{DoxyItemize}
\item true：是，即超过服务器保存消息时间消息也可以被撤回，具体见服务器消息保存时长；
\item false：否，若设置的消息撤回时限超过服务端的消息保存时间，请求消息撤回时消息可能由于过期已在服务端删除，消息撤回请求会失败，即无法从收到该消息的客户端撤回该消息。 
\end{DoxyItemize}
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
array 撤回的消息或者错误 
\end{DoxyReturn}
